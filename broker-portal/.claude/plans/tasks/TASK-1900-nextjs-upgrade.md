# TASK-1900: Upgrade Next.js to 14.2.35

## Task Overview

| Field | Value |
|-------|-------|
| **Task ID** | TASK-1900 |
| **Sprint** | SPRINT-071 |
| **Priority** | P0 - Critical |
| **Status** | Pending |
| **Estimated Tokens** | ~5K |

## Security Context

**Issue:** CRITICAL-001 - Next.js Authorization Bypass

Current version: **14.2.21**
Target version: **14.2.35**

### Vulnerabilities Being Fixed

| CVE/Advisory | Severity | CVSS | Description |
|--------------|----------|------|-------------|
| GHSA-f82v-jwr5-mffw | Critical | 9.1 | Authorization Bypass in Middleware |
| GHSA-mwv6-3258-q52c | High | 7.5 | DoS with Server Components |
| GHSA-5j59-xgg2-r9c4 | High | 7.5 | DoS with Server Components (incomplete fix) |
| GHSA-4342-x723-ch2f | Moderate | 6.5 | SSRF via Middleware Redirect |
| GHSA-g5qg-72qw-gw5v | Moderate | 6.2 | Cache Key Confusion |
| GHSA-xv57-4mr9-wg8v | Moderate | 4.3 | Content Injection |

## Requirements

### Must Do

1. Update `next` in package.json to `14.2.35`
2. Update `eslint-config-next` to `14.2.35` (must match Next.js version)
3. Run `npm install` to update lock file
4. Verify TypeScript compilation: `npm run build`
5. Run linting: `npm run lint`

### Verification Steps

1. **Build Test:**
   ```bash
   npm run build
   ```
   Must complete without errors.

2. **Dev Server Test:**
   ```bash
   npm run dev
   ```
   Application should start on port 3001.

3. **Auth Flow Smoke Test:**
   - Navigate to `/login`
   - Attempt to access `/dashboard` without auth (should redirect to login)
   - This verifies middleware authorization is working correctly

4. **Audit Verification:**
   ```bash
   npm audit
   ```
   Should show no critical vulnerabilities for `next` package.

## Files to Modify

| File | Change |
|------|--------|
| `package.json` | Update `next` and `eslint-config-next` versions |
| `package-lock.json` | Regenerated by npm install |

## Acceptance Criteria

- [ ] `next` version is 14.2.35
- [ ] `eslint-config-next` version matches
- [ ] `npm run build` succeeds
- [ ] `npm run lint` passes
- [ ] `npm audit` shows no critical Next.js vulnerabilities
- [ ] Auth middleware redirects work correctly

## Branch Information

**Branch From:** `sprint/071-security-fixes`
**Branch Into:** `sprint/071-security-fixes`
**Branch Name:** `fix/TASK-1900-nextjs-upgrade`

## Implementation Summary

*(To be filled by Engineer after implementation)*

| Field | Value |
|-------|-------|
| **Agent ID** | |
| **Actual Tokens** | |
| **Duration** | |
| **Files Changed** | |
| **Issues/Blockers** | |
