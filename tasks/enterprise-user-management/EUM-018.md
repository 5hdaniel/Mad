# EUM-018: Provisioning Status UI

## Task Info
- **Task ID:** EUM-018
- **Phase:** 4 - Automated Provisioning
- **Dependencies:** EUM-015 (Phase 3 complete)
- **Can Start:** After Phase 3 merge
- **Parallel With:** EUM-016, EUM-017, EUM-019

## Goal

Create a dashboard showing provisioning status, sync history, and error logs for SCIM operations.

## Deliverables

1. Provisioning overview dashboard
2. Sync history list
3. Error log viewer
4. Manual sync trigger
5. User provisioning source indicators

## Component Structure

```
src/components/admin/provisioning/
├── ProvisioningStatus.tsx        # Main dashboard
├── ProvisioningOverview.tsx      # Stats cards
├── SyncHistory.tsx               # History list
├── ProvisioningErrors.tsx        # Error log
└── ManualSyncButton.tsx          # Trigger sync
```

## Key Features

1. **Overview Cards**
   - Total synced users
   - Pending syncs
   - Errors (last 24h)
   - Last sync time

2. **Sync History**
   - Timestamp
   - Operation (create/update/delete)
   - User affected
   - Status (success/failed)
   - Details

3. **Error Log**
   - Error timestamp
   - Operation attempted
   - Error message
   - Retry status

## Example Component

```tsx
// src/components/admin/provisioning/ProvisioningStatus.tsx
export function ProvisioningStatus() {
  const { orgId } = useParams();
  const [stats, setStats] = useState<ProvisioningStats | null>(null);
  const [history, setHistory] = useState<SyncEvent[]>([]);
  const [errors, setErrors] = useState<ProvisioningError[]>([]);

  return (
    <div className="space-y-6">
      <h2 className="text-xl font-semibold">Provisioning Status</h2>

      <ProvisioningOverview stats={stats} />

      <div className="grid grid-cols-2 gap-6">
        <div>
          <h3 className="font-medium mb-2">Recent Activity</h3>
          <SyncHistory events={history} />
        </div>
        <div>
          <h3 className="font-medium mb-2">Errors</h3>
          <ProvisioningErrors errors={errors} />
        </div>
      </div>
    </div>
  );
}
```

## Stats Interface

```typescript
interface ProvisioningStats {
  totalSynced: number;
  syncedViaScim: number;
  syncedViaSsoJit: number;
  syncedManually: number;
  pendingInvites: number;
  errorsLast24h: number;
  lastSyncAt: string | null;
}

interface SyncEvent {
  id: string;
  timestamp: string;
  operation: 'create' | 'update' | 'delete';
  userId: string;
  userEmail: string;
  status: 'success' | 'failed';
  details?: string;
}
```

## Files to Create

- `src/components/admin/provisioning/ProvisioningStatus.tsx`
- `src/components/admin/provisioning/ProvisioningOverview.tsx`
- `src/components/admin/provisioning/SyncHistory.tsx`
- `src/components/admin/provisioning/ProvisioningErrors.tsx`
- `electron/services/provisioningStatsService.ts`

## PR Preparation Checklist

- [ ] Dashboard shows accurate stats
- [ ] History displays correctly
- [ ] Errors shown clearly
- [ ] Unit tests written
- [ ] Type check passes

## Work Summary

### Branch Name
```
[FILL IN YOUR BRANCH NAME HERE]
```

### Changes Made
```
[LIST CHANGES]
```

### Testing Done
```
[DESCRIBE TESTING]
```

### PR Link
```
[LINK TO PR]
```
