# EUM-013: SSO Configuration Wizard

## Task Info
- **Task ID:** EUM-013
- **Phase:** 3 - Admin Portal
- **Dependencies:** EUM-010 (Phase 2 complete)
- **Can Start:** After Phase 2 merge
- **Parallel With:** EUM-011, EUM-012, EUM-014

## Goal

Create a step-by-step wizard for configuring SSO with Microsoft Entra ID or Google Workspace.

## Deliverables

1. Provider selection screen
2. Step-by-step configuration wizard
3. Entra ID setup flow
4. Google Workspace setup flow
5. Test connection functionality
6. Enable/disable SSO controls
7. SSO enforcement toggle

## Component Structure

```
src/components/admin/sso/
├── SSOConfiguration.tsx          # Main container
├── ProviderSelector.tsx          # Choose Entra ID or Google
├── EntraIdWizard.tsx             # Entra ID setup steps
├── GoogleWorkspaceWizard.tsx     # Google setup steps
├── SSOTestConnection.tsx         # Test button & results
├── SSOStatus.tsx                 # Current SSO status display
└── SSOEnforcementToggle.tsx      # Enforcement setting
```

## Wizard Steps

### Entra ID Flow
1. **Provider Selection** - Choose Microsoft Entra ID
2. **Azure Setup Instructions** - Step-by-step guide with screenshots
3. **Enter Configuration** - Tenant ID, Client ID, Client Secret
4. **Test Connection** - Validate configuration
5. **Enable SSO** - Activate SSO login

### Google Workspace Flow
1. **Provider Selection** - Choose Google Workspace
2. **Google Setup Instructions** - Step-by-step guide
3. **Enter Configuration** - Domain, Client ID, Client Secret
4. **Test Connection** - Validate configuration
5. **Enable SSO** - Activate SSO login

## Example Component

```tsx
// src/components/admin/sso/SSOConfiguration.tsx
export function SSOConfiguration() {
  const { orgId } = useParams<{ orgId: string }>();
  const [config, setConfig] = useState<SSOConfiguration | null>(null);
  const [wizardStep, setWizardStep] = useState<'select' | 'configure' | 'test' | 'enable'>('select');

  if (config?.isActive) {
    return <SSOStatus config={config} onDisable={handleDisable} />;
  }

  return (
    <div className="space-y-6">
      <h2 className="text-xl font-semibold">Configure SSO</h2>

      {wizardStep === 'select' && (
        <ProviderSelector onSelect={handleProviderSelect} />
      )}

      {wizardStep === 'configure' && selectedProvider === 'entra_id' && (
        <EntraIdWizard onComplete={handleConfigComplete} />
      )}

      {wizardStep === 'configure' && selectedProvider === 'google_workspace' && (
        <GoogleWorkspaceWizard onComplete={handleConfigComplete} />
      )}

      {wizardStep === 'test' && (
        <SSOTestConnection orgId={orgId!} onSuccess={() => setWizardStep('enable')} />
      )}

      {wizardStep === 'enable' && (
        <EnableSSOStep orgId={orgId!} onEnabled={loadConfig} />
      )}
    </div>
  );
}
```

## Provider Setup Instructions Content

Include in the wizard:
- Screenshots of Azure Portal / Google Cloud Console
- Copy-paste friendly configuration values
- Links to provider documentation
- Troubleshooting tips

## Files to Create

- `src/components/admin/sso/SSOConfiguration.tsx`
- `src/components/admin/sso/ProviderSelector.tsx`
- `src/components/admin/sso/EntraIdWizard.tsx`
- `src/components/admin/sso/GoogleWorkspaceWizard.tsx`
- `src/components/admin/sso/SSOTestConnection.tsx`
- `src/components/admin/sso/SSOStatus.tsx`
- `src/components/admin/sso/SSOEnforcementToggle.tsx`
- `src/components/admin/sso/__tests__/SSOConfiguration.test.tsx`

## PR Preparation Checklist

- [ ] Both provider flows working
- [ ] Setup instructions clear
- [ ] Test connection works
- [ ] Enable/disable works
- [ ] Enforcement toggle works
- [ ] Unit tests written
- [ ] Type check passes

## Work Summary

### Branch Name
```
[FILL IN YOUR BRANCH NAME HERE]
```

### Changes Made
```
[LIST CHANGES]
```

### Testing Done
```
[DESCRIBE TESTING]
```

### PR Link
```
[LINK TO PR]
```
